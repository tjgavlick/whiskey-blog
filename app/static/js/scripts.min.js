if(!Modernizr.csstransforms){var message=document.createElement("p");throw message.className="browser-message",message.innerHTML="Hey there. This site looks kind of a mess, huh? Unfortunately I'm not going to be spending the time to support outdated browsers like this one, so please <a href=\"//outdatedbrowser.com/\">upgrade</a>. I promise it'll make the web a better place.",document.body.insertBefore(message,document.body.firstChild),new Error("Outdated browser. Stopping")}var WHISKIES=function(e,t){"use strict";function n(e,t){if(!e)return!1;for(var n=0,i=e.length;i>n;n++)t(e[n],n)}function i(e){var t=[];return n(e,function(e){t.push(e)}),t}function r(e){for(var n=[];e!==t.documentElement;)n.push(e),e=e.parentNode;return n}function a(e,t){return r(e).filter(function(e){return!!e.className&&e.classList.contains(t)})}function o(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function s(e){return"symbol"==typeof e||l(e)&&objectToString.call(e)==symbolTag}function l(e){return!!e&&"object"==typeof e}function c(e){if("number"==typeof e)return e;if(s(e))return NAN;if(o(e)){var t=isFunction(e.valueOf)?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(reTrim,"");var n=reIsBinary.test(e);return n||reIsOctal.test(e)?freeParseInt(e.slice(2),n?2:8):reIsBadHex.test(e)?NAN:+e}function u(e,t,n){function i(t){var n=g,i=p;return g=p=void 0,L=t,h=e.apply(i,n)}function r(e){return L=e,y=setTimeout(l,t),b?i(e):h}function a(e){var n=e-E,i=e-L,r=t-n;return _?nativeMin(r,v-i):r}function s(e){var n=e-E,i=e-L;return!E||n>=t||0>n||_&&i>=v}function l(){var e=Date.now();return s(e)?u(e):void(y=setTimeout(l,a(e)))}function u(e){return clearTimeout(y),y=void 0,T&&g?i(e):(g=p=void 0,h)}function d(){void 0!==y&&clearTimeout(y),E=L=0,g=p=y=void 0}function f(){return void 0===y?h:u(now())}function m(){var e=Date.now(),n=s(e);if(g=arguments,p=this,E=e,n){if(void 0===y)return r(E);if(_)return clearTimeout(y),y=setTimeout(l,t),i(E)}return void 0===y&&(y=setTimeout(l,t)),h}var g,p,v,h,y,E=0,L=0,b=!1,_=!1,T=!0;if("function"!=typeof e)throw new TypeError(FUNC_ERROR_TEXT);return t=c(t)||0,o(n)&&(b=!!n.leading,_="maxWait"in n,v=_?nativeMax(c(n.maxWait)||0,t):v,T="trailing"in n?!!n.trailing:T),m.cancel=d,m.flush=f,m}function d(){function n(){s=t.body.clientHeight,l=s-e.innerHeight}function i(){a.style.webkitTransform="translateY("+c+"px)",a.style.transform="translateY("+c+"px)"}function r(){var t=e.pageYOffset/l*2-1;c=o*t*-1,e.requestAnimationFrame(i)}var a=t.querySelector(".article-image__positioner"),o=10,s=0,l=0,c=0;n(),a&&l>0&&(a.style.top=-1*o+"px",a.style.bottom=-1*o+"px",r(),t.addEventListener("scroll",r),t.addEventListener("resize",n))}function f(e){var t=i(e.children),r=[11,108,115],a=[39,103,52],o=(a[0]-r[0])/t.length,s=(a[1]-r[1])/t.length,l=(a[2]-r[2])/t.length;n(t,function(e,t){e.children[0].style.backgroundColor="rgb("+Math.floor(r[0]+o*t)+","+Math.floor(r[1]+s*t)+","+Math.floor(r[2]+l*t)+")"})}function m(){n(t.getElementsByClassName("post-list"),f)}function g(e){n(e.querySelectorAll("h1, h2, h3"),function(e){e.innerHTML=e.innerHTML.replace(/\(.*?\)/g,'<span class="title-note">$&</span>')}),n(e.querySelectorAll("img[title]"),function(e){var n=t.createElement("figure"),i=t.createElement("figcaption"),r=e.getAttribute("title");i.innerHTML=r,e.parentNode.insertBefore(n,e),n.appendChild(e),n.appendChild(i);var a=n.parentNode;1==a.childNodes.length&&(a.parentNode.insertBefore(n,a),a.parentNode.removeChild(a))});var i=t.createElement("div"),r=e.querySelectorAll(".fragment"),a=[];r.length>0&&(n(e.querySelectorAll(".fragment"),function(e){a.push('<a href="#'+e.id+'">'+e.innerHTML.toLowerCase()+"</a>")}),i.className="article-contents",i.innerHTML='<span class="article-contents__label">Contents:</span> '+a.join(",&nbsp; "),e.insertBefore(i,e.children[0]))}function p(e,t){var n="",i=t.getAttribute("data-value-suffix")||"",r=t.getAttribute("min")||0,a=t.getAttribute("max")||0,o=t.getAttribute("data-min-description")||"",s=t.getAttribute("data-max-description")||"";n=t.value==r&&o?o:t.value==a&&s?s:t.value+" "+i,e.innerHTML=n}function v(e){var n=t.getElementById(e.getAttribute("data-from-input"));p(e,n),n.addEventListener("input",function(){p(e,n)})}function h(){n(t.querySelectorAll("[data-from-input]"),v)}function y(t,n,i){n.addEventListener("input",function(r){var a=parseInt(t.value,10),o=parseInt(n.value,10),r=new UIEvent("input",{view:e,bubbles:!0,cancelable:!0});"max"===i&&a>=o?(t.value=o-1,t.dispatchEvent(r)):"min"===i&&o>=a&&(t.value=o+1,t.dispatchEvent(r))})}function E(){n(t.querySelectorAll("[data-constrain-high]"),function(e){var n=t.getElementById(e.getAttribute("data-constrain-high"));y(e,n,"max")}),n(t.querySelectorAll("[data-constrain-low]"),function(e){var n=t.getElementById(e.getAttribute("data-constrain-low"));y(e,n,"min")})}function L(t,n,i){i||(i=e.location.href);var r,a=new RegExp("([?&])"+t+"=.*?(&|#|$)(.*)","gi");if(a.test(i))return"undefined"!=typeof n&&null!==n?i.replace(a,"$1"+t+"="+n+"$2$3"):(r=i.split("#"),i=r[0].replace(a,"$1$3").replace(/(&|\?)$/,""),"undefined"!=typeof r[1]&&null!==r[1]&&(i+="#"+r[1]),i);if("undefined"!=typeof n&&null!==n){var o=-1!==i.indexOf("?")?"&":"?";return r=i.split("#"),i=r[0]+o+t+"="+n,"undefined"!=typeof r[1]&&null!==r[1]&&(i+="#"+r[1]),i}return i}function b(n,i){var r,a=new XMLHttpRequest,o=n.id,s=t.createElement("div");a.onreadystatechange=function(){4===a.readyState&&(s.innerHTML=a.responseText,r=s.querySelector("#"+o),n.innerHTML=r.innerHTML,e.history.pushState("","",i),x=t.getElementById("search-area"),h(),E(),_(),m(),M.init())},a.open("GET",i),a.send(null)}function _(){n(t.querySelectorAll('.search-refine input[type="range"]'),function(e){e.addEventListener("change",u(function(){b(x,L(e.name,e.value))}),400)})}function T(e,t){var i=new XMLHttpRequest;i.onreadystatechange=function(){4===i.readyState&&n(t,function(t){t.innerHTML=i.responseText,g(t),e.style.minHeight=t.clientHeight+"px"})},i.open("POST","/api/markdown/"),i.send(e.value)}function N(t,n){t&&n&&e.setTimeout(function(){n.innerHTML=t.naturalWidth+"x"+t.naturalHeight},1e3)}function S(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){4===n.readyState&&t(JSON.parse(n.responseText))},n.open("GET","/api/files/?order="+e),n.send(null)}function w(e){var n=t.createElement("div"),i=t.createElement("img"),r=t.createElement("span"),a=t.createElement("span"),o=t.createElement("span");return n.className="image-selector__item image-grid__item grid__unit",i.className="image-selector__image image-grid__image",i.src=k+e[0],r.className="image-selector__filename image-grid__filename",r.innerHTML=e[0],a.className="image-selector__size image-grid__size",N(i,a),o.className="image-selector__date image-grid__date",o.innerHTML=e[2],n.appendChild(i),n.appendChild(r),n.appendChild(a),n.appendChild(o),n}function H(e){B.innerHTML='<div class="grid__unit">Loading ...</div>',S(e,function(e){var i=t.createDocumentFragment();k=e.path,n(e.files,function(e){i.appendChild(w(e))}),B.innerHTML="",B.appendChild(i)})}function A(e,i){var r=t.createElement("li");r.className="item-list__item",i.innerHTML="",n(e.files,function(e){var t=r.cloneNode(!0);t.innerHTML=e.name,i.appendChild(t)})}var M=function(){function e(e){var t=this;this.origin=e,this.targets=r(e),e.addEventListener("click",function(e){e.preventDefault(),t.activate()})}function r(e){var n=e.getAttribute("data-toggle-target");return n?"next"===n?[e.nextElementSibling]:"prev"===n?[e.previousElementSibling]:"parent"===n?[e.parentNode]:"parentnext"===n?[e.parentNode.nextElementSibling]:"parentparentnext"===n?[e.parentNode.parentNode.nextElementSibling]:i(t.querySelectorAll(n)):[]}function a(t){n(t,function(t){l.push(new e(t))})}function o(){return l}function s(){l=[],a(t.querySelectorAll("[data-toggle-target]"))}var l=[],c="is-active";return e.prototype.activate=function(e){n([this.origin].concat(this.targets),function(t){"boolean"==typeof e?t.classList.toggle(c,e):t.classList.toggle(c)})},{add:a,list:o,init:s}}();m(),n(t.getElementsByClassName("article-body"),g),h(),E();var x=t.getElementById("search-area");x&&(_(),t.body.addEventListener("click",function(e){"a"===e.target.tagName.toLowerCase()&&(a(e.target,"search-refine").length>0||a(e.target,"search-current-filters").length>0)&&(e.preventDefault(),b(x,e.target.href))})),n(t.getElementsByClassName("careful-remove"),function(e){e.addEventListener("click",function(t){e.classList.contains("is-primed")||(t.preventDefault(),e.classList.add("is-primed"))})}),n(t.querySelectorAll("[data-markdown-preview]"),function(e){var n=t.querySelectorAll(e.getAttribute("data-markdown-preview"));return n?(T(e,n),void e.addEventListener("keyup",u(function(t){T(e,n)},400))):!1}),n(t.getElementsByClassName("admin-image-list"),function(e){e.addEventListener("click",function(e){if("img"===e.target.tagName.toLowerCase()){var t,n=a(e.target,"admin-image-list__item")[0];if(!n)return!1;t=n.querySelector(".admin-image-list__filename"),n.classList.contains("is-active")?(n.classList.remove("is-active"),t.blur()):(n.classList.add("is-active"),t.focus())}})}),n(t.getElementsByClassName("admin-image-list__item"),function(e){N(e.querySelector(".image-grid__image"),e.querySelector(".image-grid__size"))});var C,q=t.querySelectorAll("[data-fills-image-input]"),I=t.createElement("div"),B=t.createElement("div"),k="";I.className="image-selector",B.className="image-selector__items image-grid grid grid--compact",I.appendChild(B),t.body.appendChild(I),q&&(n(q,function(e){e.addEventListener("click",function(n){I.classList.contains("is-active")||(H("time"),I.classList.add("is-active"),C=t.getElementById(e.getAttribute("data-fills-image-input")))})}),I.addEventListener("click",function(e){var t=a(e.target,"image-selector__item");t.length>0&&(C.value=k+t[0].getElementsByClassName("image-selector__filename")[0].innerHTML),I.classList.remove("is-active")})),n(t.querySelectorAll('input[type="file"][data-lists-to]'),function(e){var n=t.getElementById(e.getAttribute("data-lists-to"));A(e,n),e.addEventListener("change",function(t){A(e,n)})});var O=function(){Modernizr&&!Modernizr.touchevents&&d(),M.init(),t.documentElement.classList.remove("no-js"),t.documentElement.classList.add("js")};return{toggles:M,init:O}}(window,document);WHISKIES.init();